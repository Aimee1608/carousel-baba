<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>结果页</title>
</head>
<body>
<h1>结果展示页</h1>
<h3></h3>
<button>我也要玩</button>
</body>
<script src="js/jquery-1.8.3.min.js"></script>
<script>
    $(function(){
        //进来详情页面 有两种情况 1.用户已经授权，直接跳转到这个页面 展示用户信息 2.用户通过好友妆发进来，通过授权自己获取到用户信息展示
        //所以 unionid 为 用户自己授权openid   openid 为好友openid
        //先判断用户unionid 是否为空 否则进行授权 或者就是展示好友信息
        var unionid = GetQueryString("unionid");
        var openid = GetQueryString("openid");
        var result= GetQueryString("result");
        $('h3').html('结果是'+result);
        if(unionid == null)
        {
            window.location.href="http://flow.xingyuanauto.com/201706/FathertTes/code.php?openid="+openid;
        }
        else
        {
            var url = window.document.location.href;
            alert(url);
        }

        /**
         * 获取当前URL参数
         * @param [type] name [参数键名称]
         * @return [type] [参数值]
         */
        function GetQueryString(name)
        {
            var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if(r!=null)return  unescape(r[2]); return null;
        }
    })
</script>
</html>